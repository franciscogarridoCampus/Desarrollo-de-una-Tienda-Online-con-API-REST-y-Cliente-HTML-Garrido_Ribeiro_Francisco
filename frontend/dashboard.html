<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Tienda</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <h1>Dashboard</h1>
    <button id="logoutBtn">Cerrar Sesión</button>

    <h2>Productos Destacados</h2>
    <div id="destacados"></div>

    <h2>Categorías</h2>
    <div id="categorias"></div>

    <script type="module">
        import { checkAuth, logout } from './js/auth.js';
        import { getTienda, getCarrito, saveCarrito } from './js/store.js';
        import { renderProductos, renderCategorias } from './js/ui.js';

        checkAuth();

        const tienda = getTienda();
        const destacadosDiv = document.getElementById('destacados');
        const categoriasDiv = document.getElementById('categorias');

        renderProductos(destacadosDiv, tienda.productos.filter(p => p.destacado), (p) => {
            const carrito = getCarrito();
            carrito.push(p);
            saveCarrito(carrito);
            alert('Producto añadido al carrito');
        });

        renderCategorias(categoriasDiv, tienda.categorias);

        document.getElementById('logoutBtn').addEventListener('click', logout);
    </script>
</body>
</html>
